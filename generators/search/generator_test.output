//nolint
//lint:file-ignore U1000 ignore unused code, it's generated
package model

import (
	"github.com/go-pg/pg"
	"github.com/go-pg/pg/orm"
	"github.com/go-pg/pg/types"
)

// base filters
type applier func(query *orm.Query) (*orm.Query, error)

type filterParams struct {
	Table types.ValueAppender
	Field types.ValueAppender
	Value interface{}
}

// Searcher is interface for every generated filter
type Searcher interface {
	Apply(query *orm.Query) *orm.Query
	Q() applier
}

type ProjectSearch struct {
	ID   *int
	Name *string
}

func (s *ProjectSearch) Apply(query *orm.Query) *orm.Query {
	if s.ID != nil {
		query.Where("?table.?field = ?value", filterParams{
			Table: pg.F(Tables.Project.Alias),
			Field: pg.F(Columns.Project.ID),
			Value: s.ID,
		})
	}
	if s.Name != nil {
		query.Where("?table.?field = ?value", filterParams{
			Table: pg.F(Tables.Project.Alias),
			Field: pg.F(Columns.Project.Name),
			Value: s.Name,
		})
	}

	return query
}

func (s *ProjectSearch) Q() applier {
	return func(query *orm.Query) (*orm.Query, error) {
		return s.Apply(query), nil
	}
}

type UserSearch struct {
	ID        *int
	Email     *string
	Activated *bool
	Name      *string
	CountryID *int
}

func (s *UserSearch) Apply(query *orm.Query) *orm.Query {
	if s.ID != nil {
		query.Where("?table.?field = ?value", filterParams{
			Table: pg.F(Tables.User.Alias),
			Field: pg.F(Columns.User.ID),
			Value: s.ID,
		})
	}
	if s.Email != nil {
		query.Where("?table.?field = ?value", filterParams{
			Table: pg.F(Tables.User.Alias),
			Field: pg.F(Columns.User.Email),
			Value: s.Email,
		})
	}
	if s.Activated != nil {
		query.Where("?table.?field = ?value", filterParams{
			Table: pg.F(Tables.User.Alias),
			Field: pg.F(Columns.User.Activated),
			Value: s.Activated,
		})
	}
	if s.Name != nil {
		query.Where("?table.?field = ?value", filterParams{
			Table: pg.F(Tables.User.Alias),
			Field: pg.F(Columns.User.Name),
			Value: s.Name,
		})
	}
	if s.CountryID != nil {
		query.Where("?table.?field = ?value", filterParams{
			Table: pg.F(Tables.User.Alias),
			Field: pg.F(Columns.User.CountryID),
			Value: s.CountryID,
		})
	}

	return query
}

func (s *UserSearch) Q() applier {
	return func(query *orm.Query) (*orm.Query, error) {
		return s.Apply(query), nil
	}
}

type GeoCountrySearch struct {
	ID   *int
	Code *string
}

func (s *GeoCountrySearch) Apply(query *orm.Query) *orm.Query {
	if s.ID != nil {
		query.Where("?table.?field = ?value", filterParams{
			Table: pg.F(Tables.GeoCountry.Alias),
			Field: pg.F(Columns.GeoCountry.ID),
			Value: s.ID,
		})
	}
	if s.Code != nil {
		query.Where("?table.?field = ?value", filterParams{
			Table: pg.F(Tables.GeoCountry.Alias),
			Field: pg.F(Columns.GeoCountry.Code),
			Value: s.Code,
		})
	}

	return query
}

func (s *GeoCountrySearch) Q() applier {
	return func(query *orm.Query) (*orm.Query, error) {
		return s.Apply(query), nil
	}
}
